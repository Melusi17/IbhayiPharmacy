@*
    File: Views/Shared/_CustomerLayout.cshtml
*@
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>@ViewData["Title"] - Customer Dashboard</title>
    <link rel="stylesheet" href="~/css/Customer/CustomerDashboard.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
    <div class="dashboard-wrapper">

        <!-- Left Sidebar -->
        <aside class="sidebar sidebar-left">
            <div class="sidebar-header">
                <img style="height:160px;width:220px;" src="~/css/img/ibhayi2.png" />
            </div>
            <div class="sidebar-content">
                <nav>
                    <div class="sidebar-button-container">
                        <a asp-controller="CustomerDashboard" asp-action="uploadPrescription" class="sidebar-button">📥 Upload Prescription</a>
                        <a asp-controller="CustomerOrders" asp-action="placeOrder" class="sidebar-button">🛒 Place Orders</a>
                        <a asp-controller="CustomerDashboard" asp-action="trackOrder" class="sidebar-button">📦 Track Orders</a>
                        <a asp-controller="CustomerRefill" asp-action="manageRepeats" class="sidebar-button">🔁 Manage Repeats</a>
                        <a asp-controller="CustomerReports" asp-action="PrescriptionReport" class="sidebar-button">📄 View Reports</a>
                        <a asp-controller="Home" asp-action="Index"
                           class="sidebar-button"
                           onclick="return confirm('Are you sure you want to log out?');">
                            &#10145; Logout
                        </a>

                    </div>
                </nav>
            </div>

        </aside>

        <!-- Main Content -->
        <main class="main-content" id="mainContent">
            @RenderBody()
        </main>
            <!-- Right Sidebar -->
            <aside class="sidebar sidebar-right">
                <div class="profile-container">
                    <div class="profile-icon" id="profileIcon">
                        <img src="~/css/img/Customer_img/Profile.png" alt="Profile" />
                    </div>
                    <div id="profileMenu" class="profile-menu hidden">
                    <a asp-area="Identity" asp-page="/Account/Profile" class="sidebar-button">👤 My Profile</a>
                    </div>
                </div>

                <!-- Medical-Themed Notification Card -->
                <div class="medical-notification-card" id="medicalNotificationCard" onclick="toggleNotificationsModal()">
                    <div class="medical-card-header">
                        <div class="medical-card-title">
                            <span>💊</span>
                            Medication Status
                        </div>
                    </div>

                    <div class="medical-card-content" id="medicalCardContent">
                        Your medications are up to date and managed properly.
                    </div>

                    <div class="medical-card-stats">
                        <div class="stat-item">
                            <div class="stat-number" id="statReady">0</div>
                            <div class="stat-label">Ready</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number" id="statPending">0</div>
                            <div class="stat-label">Pending</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number" id="statRefills">0</div>
                            <div class="stat-label">Refills</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number" id="statAttention">0</div>
                            <div class="stat-label">Needs Attention</div>
                        </div>
                    </div>

                    <div class="medical-card-footer">
                        <div class="medical-card-action">
                            View Details
                        </div>
                    </div>
                </div>
            </aside>

            <!-- Notifications Modal -->
            <div id="notificationsModal" class="modal hidden">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3>💊Medication Alerts</h3>
                        <span class="close" onclick="closeNotificationsModal()">&times;</span>
                    </div>
                    <div class="modal-body">
                        @await Component.InvokeAsync("CustomerNotifications")
                    </div>
                </div>
            </div>

    <script src="~/js/Customer/CustomerDashboard.js"></script>

    @RenderSection("Scripts", required: false)
</body>
</html>

@{
    ViewData["Title"] = "Upload Prescription";
    Layout = "~/Views/Shared/CustomerLayout/_CustomerLayout.cshtml";
}

        <h2>📥 Upload Prescription</h2>
        <form id="prescriptionForm" enctype="multipart/form-data">
            <input type="file" id="prescriptionFile" name="prescriptionFile" accept=".pdf, image/*" required>

            <div class="inline-fields">
                <input type="date" id="prescriptionDate" name="prescriptionDate" required placeholder="Prescription Date">
                <input type="text" id="doctorName" name="doctorName" placeholder="Doctor's Name" required>
            </div>

            <label class="checkbox-label">
                <input type="checkbox" id="dispenseCheckbox" name="dispenseCheckbox">
                Dispense this prescription upon approval
            </label>

            <button type="submit" class="btn-upload">Upload</button>
        </form>
        <div id="uploadStatus"></div>
    

    <div class="upload-prescription-panel">
        <h2>📋 Unprocessed Prescriptions</h2>
        <table class="prescription-table">
            <thead>
                <tr>
                    <th>Date</th>
                    <th>File</th>
                    <th>Dispense</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody id="unprocessedBody">
                <!-- Hardcoded sample record -->
                <tr>
                    <td>2025-05-13</td>
                    <td>Prescription_ABC.pdf</td>
                    <td>Yes</td>
                    <td>
                        <button class="btn-upload" onclick="alert('Edit clicked')">Edit</button>
                        <button class="btn-upload" onclick="this.parentElement.parentElement.remove()">Remove</button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>


    <div class="upload-prescription-panel">
        <h2>✅ Processed Prescriptions</h2>
        <table class="prescription-table">
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Doctor</th>
                    <th>Prescription</th>
                    <th>Order Medication</th>
                </tr>
            </thead>
            <tbody id="processedBody">
                <!-- Example hardcoded data -->
                <tr>
                    <td>2025-05-13</td>
                    <td>Dr. John Smith</td>
                    <td>Prescription_XYZ.pdf</td>
                    <td><button class="btn-upload" onclick="openOrderModal('2025-05-13', 'Dr. John Smith')">View</button></td>
                </tr>
            </tbody>
        </table>
    </div>
    <!-- Medication Order Modal -->
    <div id="orderModal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <h2>🩺 Order Medication</h2>
            <div class="order-details">
                <p><strong>Date:</strong> <span id="modalDate">2025-05-13</span></p>
                <p><strong>Doctor:</strong> <span id="modalDoctor">Dr. John Smith</span></p>
            </div>

            <table class="prescription-table">
                <thead>
                    <tr>
                        <th>Select</th>
                        <th>Medication</th>
                        <th>Qty</th>
                        <th>Instructions</th>
                        <th>Repeats</th>
                        <th>Price (R)</th>
                    </tr>
                </thead>
                <tbody id="modalMedications">
                    <tr>
                        <td><input type="checkbox" class="med-check" data-price="120" onchange="updateTotal()"></td>
                        <td>Amoxicillin</td>
                        <td>2</td>
                        <td>Twice a day</td>
                        <td>1</td>
                        <td>120</td>
                    </tr>
                    <tr>
                        <td><input type="checkbox" class="med-check" data-price="60" onchange="updateTotal()"></td>
                        <td>Ibuprofen</td>
                        <td>1</td>
                        <td>After meals</td>
                        <td>0</td>
                        <td>60</td>
                    </tr>
                </tbody>
            </table>

            <div class="total-summary">
                <p><strong>Total (incl. VAT): R</strong><span id="totalDue">0.00</span></p>
            </div>

            <button class="btn-upload" onclick="placeMedicationOrder()">Place Order</button>
            <button class="btn-upload" style="background-color: grey;" onclick="closeModal()">Close</button>
        </div>
    </div>

  @*   renderUnprocessedTable();  // Show table on load
    attachUploadHandler(); *@
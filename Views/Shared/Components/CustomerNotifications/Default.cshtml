@using IbhayiPharmacy.Models.PharmacistVM
@model CustomerNotificationViewModel

<!-- Debug Info (remove in production) -->
<!--
AvailableForOrdering: @Model.AvailableForOrderingCount
AvailableForRefills: @Model.AvailableForRefillsCount
ReadyForCollection: @Model.ReadyForCollectionCount
RejectedMedications: @Model.RejectedMedicationsCount
PendingOrders: @Model.PendingOrdersCount
-->
@{
    var totalNotifications = Model.AvailableForOrderingCount + Model.AvailableForRefillsCount +
                            Model.ReadyForCollectionCount + Model.RejectedMedicationsCount;
}

@if (totalNotifications == 0)
{
    <div class="empty-notifications">
        <div class="empty-icon">🎉</div>
        <div style="font-size: 16px; margin-bottom: 8px; color: #28a745;">All caught up!</div>
        <div style="font-size: 14px; color: #666;">No pending medication alerts</div>
        <div style="font-size: 12px; color: #888; margin-top: 10px;">You're all set for now</div>
    </div>
}
else
{
    <div class="notifications-list">
        <!-- Available for Ordering -->
        @if (Model.AvailableForOrderingCount > 0)
        {
            <div class="notification-item" data-type="ordering">
                <div class="notification-icon" style="color: #2196F3;">📥</div>
                <div class="notification-content">
                    <div class="notification-title">@Model.AvailableForOrderingCount Medication(s) Ready to Order</div>
                    <div class="notification-description">Your approved prescriptions are waiting to be ordered and processed.</div>
                </div>
                <div class="notification-action">
                    <a asp-controller="CustomerOrders" asp-action="PlaceOrder">Order</a>
                </div>
            </div>
        }

        <!-- Available for Refills -->
        @if (Model.AvailableForRefillsCount > 0)
        {
            <div class="notification-item" data-type="refills">
                <div class="notification-icon" style="color: #FF9800;">🔄</div>
                <div class="notification-content">
                    <div class="notification-title">@Model.AvailableForRefillsCount Medication(s) Available for Refill</div>
                    <div class="notification-description">You have repeats remaining on your prescriptions that can be refilled.</div>
                </div>
                <div class="notification-action">
                    <a asp-controller="CustomerRefill" asp-action="ManageRepeats">Refill</a>
                </div>
            </div>
        }

        <!-- Ready for Collection -->
        @if (Model.ReadyForCollectionCount > 0)
        {
            <div class="notification-item" data-type="ready">
                <div class="notification-icon" style="color: #4CAF50;">✅</div>
                <div class="notification-content">
                    <div class="notification-title">@Model.ReadyForCollectionCount Medication(s) Ready for Collection</div>
                    <div class="notification-description">Your order is ready and waiting for you at the pharmacy.</div>
                </div>
                <div class="notification-action">
                    <a asp-controller="CustomerDashboard" asp-action="TrackOrder">Track</a>
                </div>
            </div>
        }

        <!-- Pending Orders -->
        @if (Model.PendingOrdersCount > 0)
        {
            <div class="notification-item" data-type="pending">
                <div class="notification-icon" style="color: #9C27B0;">⏳</div>
                <div class="notification-content">
                    <div class="notification-title">@Model.PendingOrdersCount Order(s) Being Processed</div>
                    <div class="notification-description">We're currently preparing your medications for dispatch.</div>
                </div>
                <div class="notification-action">
                    <a asp-controller="CustomerDashboard" asp-action="TrackOrder">View</a>
                </div>
            </div>
        }

        <!-- Rejected Medications -->
        @if (Model.RejectedMedicationsCount > 0)
        {
            <div class="notification-item" data-type="rejected">
                <div class="notification-icon" style="color: #F44336;">❌</div>
                <div class="notification-content">
                    <div class="notification-title">@Model.RejectedMedicationsCount Item(s) Need Attention</div>
                    <div class="notification-description">Some medications require your review or additional information.</div>
                </div>
                <div class="notification-action">
                    <a asp-controller="CustomerDashboard" asp-action="TrackOrder">Review</a>
                </div>
            </div>
        }
    </div>
}